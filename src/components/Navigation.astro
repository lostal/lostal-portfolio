---
import { useTranslations, getLocalizedPath } from '../i18n/utils';

interface Props {
  lang: 'es' | 'en';
}

const { lang } = Astro.props;
const t = useTranslations(lang);
---

<nav id="navbar">
  <div class="container">
    <div class="nav-content">
      <a href="#top" class="logo">AL</a>

      <ul class="nav-links">
        <li><a href="#projects">{t('nav.projects')}</a></li>
        <li><a href="#journey">{t('nav.journey')}</a></li>
        <li><a href="#skills">{t('nav.skills')}</a></li>
        <li><a href="#contact">{t('nav.contact')}</a></li>
      </ul>

      <div class="nav-actions">
        <!-- Language menu: emoji/flag-only button that shows a mini popover on hover/click -->
        <div class="lang-menu">
          <a
            href={getLocalizedPath('/', lang === 'es' ? 'en' : 'es')}
            class="lang-btn"
            id="langBtn"
            data-lang={lang}
            aria-haspopup="true"
            aria-expanded="false"
            aria-controls="langPopover"
            aria-label={lang === 'es' ? 'Idioma: Español' : 'Language: English'}
            title={lang === 'es' ? 'Español' : 'English'}
          >
            <i class="fas fa-language" id="langIcon" aria-hidden="true"></i>
          </a>

          <ul
            class="lang-popover"
            id="langPopover"
            role="menu"
            aria-labelledby="langBtn"
          >
            <li class="lang-item" role="menuitem">
              <a href="/" class="lang-action" data-lang="es">
                <img src="/assets/flags/es.svg" alt="" />
                <span class="lang-label">Español</span>
              </a>
            </li>
            <li class="lang-item" role="menuitem">
              <a href="/en/" class="lang-action" data-lang="en">
                <img src="/assets/flags/us.svg" alt="" />
                <span class="lang-label">English</span>
              </a>
            </li>
          </ul>
        </div>

        <button
          class="theme-toggle"
          id="themeToggle"
          aria-label={t('nav.theme')}
        >
          <i class="fas fa-lightbulb" id="themeIcon"></i>
        </button>
        <button
          class="mobile-menu-btn"
          id="mobileMenuBtn"
          aria-label={t('nav.menu')}
        >
          <div class="hamburger-icon">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </div>
        </button>
      </div>
    </div>
  </div>

  <div class="mobile-menu" id="mobileMenu">
    <ul class="mobile-menu-links">
      <li>
        <a href="#projects" class="mobile-link">{t('nav.projects')}</a>
      </li>
      <li>
        <a href="#journey" class="mobile-link">{t('nav.journey')}</a>
      </li>
      <li>
        <a href="#skills" class="mobile-link">{t('nav.skills')}</a>
      </li>
      <li>
        <a href="#contact" class="mobile-link">{t('nav.contact')}</a>
      </li>
    </ul>
  </div>
</nav>
